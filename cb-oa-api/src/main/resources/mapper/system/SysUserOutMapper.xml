<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cb.oa.mapper.SysUserOutMapper">

    <resultMap type="SysUserOut" id="SysUserOutResult">
        <result property="id"    column="id"    />
        <result property="username"    column="username"    />
        <result property="usernameLetter"    column="username_letter"    />
        <result property="nickName"    column="nick_name"    />
        <result property="officeTel"    column="office_tel"    />
        <result property="shortNumber"    column="short_number"    />
        <result property="userAppellation"    column="user_appellation"    />
        <result property="userPost"    column="user_post"    />
        <result property="officeAddress"    column="office_address"    />
        <result property="gender"    column="gender"    />
        <result property="phone"    column="phone"    />
        <result property="email"    column="email"    />
        <result property="enabled"    column="enabled"    />
        <result property="mainDeptid"    column="main_deptid"    />
        <result property="pinyin"    column="pinyin"    />
        <result property="csort"    column="csort"    />
        <result property="createBy"    column="create_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="delFlag"    column="del_flag"    />
        <result property="userId"    column="user_id"    />
    </resultMap>

    <resultMap id="sysUserOutVo" type="SysUserOutVo" extends="SysUserOutResult">
        <result property="deptOutName"    column="dept_out_name"    />
        <result property="sysDeptId"    column="sys_dept_id"    />
    </resultMap>
    <sql id="selectSysUserOutVo">
        select uo.id, uo.username, uo.username_letter, uo.nick_name, uo.office_tel, uo.short_number, uo.user_appellation, uo.user_post,
               uo.office_address, uo.gender, uo.phone, uo.email, uo.enabled, uo.main_deptid, uo.pinyin, uo.csort, uo.create_by,
               uo.update_time, uo.update_by, uo.create_time, uo.del_flag, uo.user_id,do.name as dept_out_name, do.dept_id as sys_dept_id
        from sys_user_out uo
        left join sys_dept_out do on uo.main_deptid=do.id
    </sql>

    <select id="selectSysUserOutList" parameterType="SysUserOut" resultMap="sysUserOutVo">
        <include refid="selectSysUserOutVo"/>
        <where>
            <if test="username != null  and username != ''"> and uo.username like concat('%', #{username}, '%')</if>
            <if test="usernameLetter != null  and usernameLetter != ''"> and uo.username_letter = #{usernameLetter}</if>
            <if test="nickName != null  and nickName != ''"> and uo.nick_name like concat('%', #{nickName}, '%')</if>
            <if test="officeTel != null  and officeTel != ''"> and uo.office_tel = #{officeTel}</if>
            <if test="shortNumber != null  and shortNumber != ''"> and uo.short_number = #{shortNumber}</if>
            <if test="userAppellation != null  and userAppellation != ''"> and uo.user_appellation = #{userAppellation}</if>
            <if test="userPost != null  and userPost != ''"> and uo.user_post = #{userPost}</if>
            <if test="officeAddress != null  and officeAddress != ''"> and uo.office_address = #{officeAddress}</if>
            <if test="gender != null  and gender != ''"> and uo.gender = #{gender}</if>
            <if test="phone != null  and phone != ''"> and uo.phone like concat('%',#{phone},'%') </if>
            <if test="email != null  and email != ''"> and uo.email = #{email}</if>
            <if test="enabled != null "> and uo.enabled = #{enabled}</if>
            <if test="mainDeptid != null  and mainDeptid != ''"> and uo.main_deptid = #{mainDeptid}</if>
            <if test="pinyin != null  and pinyin != ''"> and uo.pinyin = #{pinyin}</if>
            <if test="csort != null  and csort != ''"> and uo.csort = #{csort}</if>
            <if test="userId != null "> and uo.user_id = #{userId}</if>
        </where>
        order by main_deptid desc
    </select>
    <select id="selectSysUserOutVoList" parameterType="SysUserOut" resultMap="sysUserOutVo">
        <include refid="selectSysUserOutVo"/>
        <where>
            <if test="username != null  and username != ''"> and uo.username like concat('%', #{username}, '%')</if>
            <if test="usernameLetter != null  and usernameLetter != ''"> and uo.username_letter = #{usernameLetter}</if>
            <if test="nickName != null  and nickName != ''"> and uo.nick_name like concat('%', #{nickName}, '%')</if>
            <if test="officeTel != null  and officeTel != ''"> and uo.office_tel = #{officeTel}</if>
            <if test="shortNumber != null  and shortNumber != ''"> and uo.short_number = #{shortNumber}</if>
            <if test="userAppellation != null  and userAppellation != ''"> and uo.user_appellation = #{userAppellation}</if>
            <if test="userPost != null  and userPost != ''"> and uo.user_post = #{userPost}</if>
            <if test="officeAddress != null  and officeAddress != ''"> and uo.office_address = #{officeAddress}</if>
            <if test="gender != null  and gender != ''"> and uo.gender = #{gender}</if>
            <if test="phone != null  and phone != ''"> and uo.phone like concat('%',#{phone},'%') </if>
            <if test="email != null  and email != ''"> and uo.email = #{email}</if>
            <if test="enabled != null "> and uo.enabled = #{enabled}</if>
            <if test="mainDeptid != null  and mainDeptid != ''"> and uo.main_deptid = #{mainDeptid}</if>
            <if test="pinyin != null  and pinyin != ''"> and uo.pinyin = #{pinyin}</if>
            <if test="csort != null  and csort != ''"> and uo.csort = #{csort}</if>
            <if test="userId != null "> and uo.user_id = #{userId}</if>
            <if test="deptOutName != null "> and do.name like concat('%',#{deptOutName},'%')</if>
            <if test="userStatus != null and userStatus == 1"> and uo.user_id is not null</if>
            <if test="userStatus != null and userStatus == 0"> and uo.user_id is null</if>
        </where>
        order by main_deptid desc
    </select>
    <select id="selectSysUserOutById" parameterType="String" resultMap="SysUserOutResult">
        <include refid="selectSysUserOutVo"/>
        where uo.id = #{id}
    </select>
    <select id="selectSysUserOutByOaUserName" parameterType="String" resultMap="SysUserOutResult">
        <include refid="selectSysUserOutVo"/>
        where username = #{oaUserName}
        limit 1
    </select>

    <select id="selectSysUserOutByParam" parameterType="String" resultMap="SysUserOutResult">
        <include refid="selectSysUserOutVo"/>
       <where>
           <if test="userId != null "> and uo.user_id = #{userId}</if>
           <if test="id != null "> and uo.id = #{id}</if>
       </where>
       limit 1
    </select>

    <insert id="insertSysUserOut" parameterType="SysUserOut">
        insert into sys_user_out
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null and id != ''">id,</if>
            <if test="username != null">username,</if>
            <if test="usernameLetter != null">username_letter,</if>
            <if test="nickName != null">nick_name,</if>
            <if test="officeTel != null">office_tel,</if>
            <if test="shortNumber != null">short_number,</if>
            <if test="userAppellation != null">user_appellation,</if>
            <if test="userPost != null">user_post,</if>
            <if test="officeAddress != null">office_address,</if>
            <if test="gender != null">gender,</if>
            <if test="phone != null">phone,</if>
            <if test="email != null">email,</if>
            <if test="enabled != null">enabled,</if>
            <if test="mainDeptid != null">main_deptid,</if>
            <if test="pinyin != null">pinyin,</if>
            <if test="csort != null">csort,</if>
            <if test="createBy != null">create_by,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="delFlag != null">del_flag,</if>
            <if test="userId != null">user_id,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null and id != ''">#{id},</if>
            <if test="username != null">#{username},</if>
            <if test="usernameLetter != null">#{usernameLetter},</if>
            <if test="nickName != null">#{nickName},</if>
            <if test="officeTel != null">#{officeTel},</if>
            <if test="shortNumber != null">#{shortNumber},</if>
            <if test="userAppellation != null">#{userAppellation},</if>
            <if test="userPost != null">#{userPost},</if>
            <if test="officeAddress != null">#{officeAddress},</if>
            <if test="gender != null">#{gender},</if>
            <if test="phone != null">#{phone},</if>
            <if test="email != null">#{email},</if>
            <if test="enabled != null">#{enabled},</if>
            <if test="mainDeptid != null">#{mainDeptid},</if>
            <if test="pinyin != null">#{pinyin},</if>
            <if test="csort != null">#{csort},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="delFlag != null">#{delFlag},</if>
            <if test="userId != null">#{userId},</if>
         </trim>
    </insert>

    <update id="updateSysUserOut" parameterType="SysUserOut">
        update sys_user_out
        <trim prefix="SET" suffixOverrides=",">
            <if test="username != null">username = #{username},</if>
            <if test="usernameLetter != null">username_letter = #{usernameLetter},</if>
            <if test="nickName != null">nick_name = #{nickName},</if>
            <if test="officeTel != null">office_tel = #{officeTel},</if>
            <if test="shortNumber != null">short_number = #{shortNumber},</if>
            <if test="userAppellation != null">user_appellation = #{userAppellation},</if>
            <if test="userPost != null">user_post = #{userPost},</if>
            <if test="officeAddress != null">office_address = #{officeAddress},</if>
            <if test="gender != null">gender = #{gender},</if>
            <if test="phone != null">phone = #{phone},</if>
            <if test="email != null">email = #{email},</if>
            <if test="enabled != null">enabled = #{enabled},</if>
            <if test="mainDeptid != null">main_deptid = #{mainDeptid},</if>
            <if test="pinyin != null">pinyin = #{pinyin},</if>
            <if test="csort != null">csort = #{csort},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="delFlag != null">del_flag = #{delFlag},</if>
            <if test="userId != null">user_id = #{userId},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteSysUserOutById" parameterType="String">
        delete from sys_user_out where id = #{id}
    </delete>

    <delete id="deleteSysUserOutByIds" parameterType="String">
        delete from sys_user_out where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>
